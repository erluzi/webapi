<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Notification api</title>
</head>
<body>
<button id="btn1" onclick="notify()">notify me</button>
<script>
  if (!window.Notification) {
    alert('This browser does not support system notifications')
  } else {
    let permission = Notification.permission
    console.log(permission)
    if (permission === 'default') {
      Notification.requestPermission().then(function (result) {
        console.log(result)
      })
    }
  }

  function spawnNotification(title = 'hi', options = {}) {
    options.tag = 'normal'
    let n = new Notification(title, options)
    n.addEventListener('click', function (e) {
      console.log(e)
    })
    setTimeout(n.close.bind(n), 5000)
  }

  function notify() {
    spawnNotification('hi', {
      icon: '../img/car.png',
      body: 'can u see?',
    })
  }
</script>
</body>
</html>
